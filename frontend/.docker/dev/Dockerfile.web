FROM node:24-alpine

WORKDIR /code

COPY package.json tsconfig.json /code/
COPY src /code/src

RUN yarn --frozen-lockfile
RUN yarn build:dev -- /code/
RUN yarn global add serve

RUN rm -r package.json tsconfig.json src

CMD ["serve", "-s", "/code/build"]
